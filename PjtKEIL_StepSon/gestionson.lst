


ARM Macro Assembler    Page 1 


    1 00000000                 PRESERVE8
    2 00000000                 THUMB
    3 00000000                 include          ../../Driver/DriverJeuLaser.inc
    1 00000000         
    2 00000000         ; Bibliotheque DriverJeuLaser (ancienne gassp72 adaptée 
                       2021 - TR)
    3 00000000         ; Accès en aux fonctions suivantes :
    4 00000000         ; GPIO :
    5 00000000         ; GPIOA_Set(char Broche), GPIOB_Set(char Broche), GPIOC_
                       Set(char Broche)
    6 00000000         ; GPIOA_Clear(char Broche), GPIOB_Clear(char Broche), GP
                       IOC_Clear(char Broche)
    7 00000000         
    8 00000000         ; PWM :
    9 00000000         ;/**
   10 00000000         ; * @brief  Fixe une valeur de PWM, Val, en tick horloge
                       . La rapport cyclique effectif
   11 00000000         ; * est donc : rcy = Thaut_ticks / Periode_ticks
   12 00000000         ; * @note   spécifique Jeu Laser, PWM liée exclusivement
                        au TIM3, chan3
   13 00000000         ; * @param  Thaut_ticks : durée de l'état haut d'une imp
                       ulsion en Ticks
   14 00000000         ;  * @retval None
   15 00000000         ; */
   16 00000000         
   17 00000000         ;void PWM_Set_Value_TIM3_Ch3( unsigned short int Thaut_t
                       icks);
   18 00000000                 import           PWM_Set_Value_TIM3_Ch3
   19 00000000         
   20 00000000         
   21 00000000         
   22 00000000         ;/**
   23 00000000         ; * @brief  Mise à 1 d'une broche GPIO 
   24 00000000         ;  * @note   Une fonction par GPIO
   25 00000000         ; * @param  Broche : 0 à 15
   26 00000000         ; * @retval None
   27 00000000         ; */
   28 00000000         
   29 00000000         ;void GPIOA_Set(char Broche);
   30 00000000                 import           GPIOA_Set
   31 00000000         
   32 00000000         ;void GPIOB_Set(char Broche);
   33 00000000                 import           GPIOB_Set
   34 00000000         
   35 00000000         ;void GPIOC_Set(char Broche);
   36 00000000                 import           GPIOC_Set
   37 00000000         
   38 00000000         
   39 00000000         
   40 00000000         ;/**
   41 00000000         ; * @brief  Mise à 0 d'une broche GPIO 
   42 00000000         ;  * @note   Une fonction par GPIO
   43 00000000         ; * @param  Broche : 0 à 15
   44 00000000         ; * @retval None
   45 00000000         ;  */
   46 00000000         
   47 00000000         ;void GPIOA_Clear(char Broche);
   48 00000000                 import           GPIOA_Clear
   49 00000000         



ARM Macro Assembler    Page 2 


   50 00000000         ;void GPIOB_Clear(char Broche);
   51 00000000                 import           GPIOB_Clear
   52 00000000         
   53 00000000         ;void GPIOC_Clear(char Broche);
   54 00000000                 import           GPIOC_Clear
   55 00000000         
   56 00000000                 end
    4 00000000         
    5 00000000         
    6 00000000         ; ====================== zone de réservation de données,
                         ======================================
    7 00000000         ;Section RAM (read only) :
    8 00000000                 area             mesdata,data,readonly
    9 00000000         
   10 00000000         
   11 00000000         ;Section RAM (read write):
   12 00000000                 area             maram,data,readwrite
   13 00000000         
   14 00000000         
   15 00000000         ; ======================================================
                       =========================================
   16 00000000         
   17 00000000         
   18 00000000 00000000 
                       index   dcd              0
   19 00000004 00 00   SortieSon
                               dcw              0
   20 00000006         
   21 00000006         ;Section ROM code (read only) :  
   22 00000006                 area             moncode,code,readonly
   23 00000000         ; écrire le code ici  
   24 00000000         
   25 00000000         
   26 00000000                 EXPORT           index
   27 00000000                 EXPORT           SortieSon
   28 00000000                 EXPORT           CallbackSon
   29 00000000                 EXPORT           StartSon
   30 00000000         
   31 00000000                 IMPORT           Son
   32 00000000                 IMPORT           LongueurSon
   33 00000000         
   34 00000000         
   35 00000000         CallbackSon
                               proc
   36 00000000 B570            push             {r4,r5,r6,lr}
   37 00000002 4813    reprise ldr              r0, =index
   38 00000004 6803            ldr              r3, [r0]
   39 00000006         
   40 00000006 4913            ldr              r1, =SortieSon
   41 00000008         
   42 00000008 4A13            ldr              r2, =Son
   43 0000000A         
   44 0000000A         
   45 0000000A 4C14            ldr              r4, =LongueurSon
   46 0000000C 6825            ldr              r5, [r4]
   47 0000000E         
   48 0000000E 42AB            cmp              r3, r5
   49 00000010 DC12            bgt              tmp
   50 00000012         



ARM Macro Assembler    Page 3 


   51 00000012 F932 6013       ldrsh            r6, [r2, r3, lsl#1]
   52 00000016         ;lsr r6, r6, #16
   53 00000016 F506 4600       add              r6,#32768
   54 0000001A F44F 7234       mov              r2, #720
   55 0000001E FB06 F602       mul              r6, r2
   56 00000022 EA4F 4626       asr              r6, #16
   57 00000026 800E            strh             r6,[r1]
   58 00000028         
   59 00000028         
   60 00000028 4630            mov              r0, r6
   61 0000002A         
   62 0000002A F7FF FFFE       bl               PWM_Set_Value_TIM3_Ch3
   63 0000002E         
   64 0000002E F103 0301       add              r3, #1
   65 00000032 4807            ldr              r0, =index
   66 00000034 6003            str              r3, [r0]
   67 00000036 E002            b                stop
   68 00000038         
   69 00000038 F7FF FFFE 
                       tmp     bl               StartSon
   70 0000003C         ;ldr r3, [r1]
   71 0000003C E7E1            b                reprise
   72 0000003E         
   73 0000003E E8BD 4070 
                       stop    pop              {r4, r5, r6,lr}
   74 00000042 4770            bx               lr
   75 00000044                 endp
   76 00000044         
   77 00000044         StartSon
                               proc
   78 00000044 4902            ldr              r1, =index
   79 00000046 F04F 0200       mov              r2, #0
   80 0000004A 600A            str              r2, [r1]
   81 0000004C 4770            bx               lr
   82 0000004E                 endp
   83 0000004E                 END
              00 00 00000000 
              00000000 
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\obj\gestionson.d -o.\obj\gestionson.o -I.\RTE\_Simu -IC:\Program
data\Keil\Arm\Packs\ARM\CMSIS\5.7.0\CMSIS\Core\Include -IC:\Programdata\Keil\Ar
m\Packs\Keil\STM32F1xx_DFP\2.3.0\Device\Include --predefine="__EVAL SETA 1" --p
redefine="__MICROLIB SETA 1" --predefine="__UVISION_VERSION SETA 534" --predefi
ne="_RTE_ SETA 1" --predefine="STM32F10X_MD SETA 1" --predefine="_RTE_ SETA 1" 
--list=gestionson.lst Src\Son\GestionSon.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

mesdata 00000000

Symbol: mesdata
   Definitions
      At line 8 in file Src\Son\GestionSon.s
   Uses
      None
Comment: mesdata unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

SortieSon 00000004

Symbol: SortieSon
   Definitions
      At line 19 in file Src\Son\GestionSon.s
   Uses
      At line 27 in file Src\Son\GestionSon.s
      At line 40 in file Src\Son\GestionSon.s

index 00000000

Symbol: index
   Definitions
      At line 18 in file Src\Son\GestionSon.s
   Uses
      At line 26 in file Src\Son\GestionSon.s
      At line 37 in file Src\Son\GestionSon.s
      At line 65 in file Src\Son\GestionSon.s
      At line 78 in file Src\Son\GestionSon.s

maram 00000000

Symbol: maram
   Definitions
      At line 12 in file Src\Son\GestionSon.s
   Uses
      None
Comment: maram unused
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CallbackSon 00000000

Symbol: CallbackSon
   Definitions
      At line 35 in file Src\Son\GestionSon.s
   Uses
      At line 28 in file Src\Son\GestionSon.s
Comment: CallbackSon used once
StartSon 00000044

Symbol: StartSon
   Definitions
      At line 77 in file Src\Son\GestionSon.s
   Uses
      At line 29 in file Src\Son\GestionSon.s
      At line 69 in file Src\Son\GestionSon.s

moncode 00000000

Symbol: moncode
   Definitions
      At line 22 in file Src\Son\GestionSon.s
   Uses
      None
Comment: moncode unused
reprise 00000002

Symbol: reprise
   Definitions
      At line 37 in file Src\Son\GestionSon.s
   Uses
      At line 71 in file Src\Son\GestionSon.s
Comment: reprise used once
stop 0000003E

Symbol: stop
   Definitions
      At line 73 in file Src\Son\GestionSon.s
   Uses
      At line 67 in file Src\Son\GestionSon.s
Comment: stop used once
tmp 00000038

Symbol: tmp
   Definitions
      At line 69 in file Src\Son\GestionSon.s
   Uses
      At line 49 in file Src\Son\GestionSon.s
Comment: tmp used once
6 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

GPIOA_Clear 00000000

Symbol: GPIOA_Clear
   Definitions
      At line 48 in file Src\Son\..\..\Driver\DriverJeuLaser.inc
   Uses
      None
Comment: GPIOA_Clear unused
GPIOA_Set 00000000

Symbol: GPIOA_Set
   Definitions
      At line 30 in file Src\Son\..\..\Driver\DriverJeuLaser.inc
   Uses
      None
Comment: GPIOA_Set unused
GPIOB_Clear 00000000

Symbol: GPIOB_Clear
   Definitions
      At line 51 in file Src\Son\..\..\Driver\DriverJeuLaser.inc
   Uses
      None
Comment: GPIOB_Clear unused
GPIOB_Set 00000000

Symbol: GPIOB_Set
   Definitions
      At line 33 in file Src\Son\..\..\Driver\DriverJeuLaser.inc
   Uses
      None
Comment: GPIOB_Set unused
GPIOC_Clear 00000000

Symbol: GPIOC_Clear
   Definitions
      At line 54 in file Src\Son\..\..\Driver\DriverJeuLaser.inc
   Uses
      None
Comment: GPIOC_Clear unused
GPIOC_Set 00000000

Symbol: GPIOC_Set
   Definitions
      At line 36 in file Src\Son\..\..\Driver\DriverJeuLaser.inc
   Uses
      None
Comment: GPIOC_Set unused
LongueurSon 00000000

Symbol: LongueurSon
   Definitions
      At line 32 in file Src\Son\GestionSon.s
   Uses
      At line 45 in file Src\Son\GestionSon.s
Comment: LongueurSon used once
PWM_Set_Value_TIM3_Ch3 00000000

Symbol: PWM_Set_Value_TIM3_Ch3



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols

   Definitions
      At line 18 in file Src\Son\..\..\Driver\DriverJeuLaser.inc
   Uses
      At line 62 in file Src\Son\GestionSon.s
Comment: PWM_Set_Value_TIM3_Ch3 used once
Son 00000000

Symbol: Son
   Definitions
      At line 31 in file Src\Son\GestionSon.s
   Uses
      At line 42 in file Src\Son\GestionSon.s
Comment: Son used once
9 symbols
356 symbols in table
